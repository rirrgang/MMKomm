<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="test-Version2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> 
    <script type="text/javascript" src="darkenColor-Version2.js"></script>
    
</head>
<body>

<script>
        function openForm() {
        var settings = document.getElementById("myForm");
        if (settings.style.display === "none"){
            settings.style.display = "block";
            var containers = document.querySelectorAll(".holdingcontainer");
            containers.forEach(container => container.style.opacity = "0.1");
        }
        else{
            settings.style.display = "none";
            var containers = document.querySelectorAll(".holdingcontainer");
            containers.forEach(container => container.style.opacity = "1");
          }   
    }
        
        function closeForm() {
          document.getElementById("myForm").style.display = "none";
          var containers = document.querySelectorAll(".holdingcontainer");
          containers.forEach(container => container.style.opacity = "1");
        }
</script>

    <div id="marquee"></div>
    <button type="button" class="button" onclick="openForm()">
        <div class="button__icon">
            <i class="fas fa-sliders-h"></i>
        </div>
      </button>

    <div class="form-popup" id="myForm" style="display: none;">
            <div class="form-container">
            <form>
                <input type="text" class="todo-input">
                <button class="todo-button" type="submit" onclick="addTodo()">
                    <i class="fas fa-plus-square"></i>
                </button>
            </form>
            <div class="todo-container">
                <ul class="todo-list"></ul>
            </div>
        <div class="selector-buttons">
        <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
        <button type="submit" class="btn">Search</button>
        </div>
    </div>
      </div>

    <div class="holdingcontainer" id="h_container1">
        <div class="internalcontainerW"><h1>Evaluations</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerR"><h1>Due Dilligence</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerB"><h1>Mergers and Acquisitions</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
      </div>
      <div class="holdingcontainer" id="h_container2">
        <div class="internalcontainerW"><h1>Evaluations</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerR"><h1>Due Dilligence</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerB"><h1>Mergers and Acquisitions</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
      </div>
      <div class="holdingcontainer" id="h_container3">
        <div class="internalcontainerW"><h1>Evaluations</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerR"><h1>Due Dilligence</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
        <div class="internalcontainerB"><h1>Mergers and Acquisitions</h1><img class="dasimages" src="test_img.jpg" width="100%"/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
      </div>

<script>
    const todoInput = document.querySelector('.todo-input');
    const todoButton = document.querySelector('.todo-button');
    const todoList = document.querySelector('.todo-list');
    
    document.addEventListener('DOMContentLoaded', getTodos); //EventListener wenn Seite lädt
    todoButton.addEventListener('click', addTodo);
    todoList.addEventListener('click',deleteCheck);
    
    function addTodo(event){
        //prevent form from submitting (page refreshing)
        event.preventDefault();
        //Todo DIV
        const todoDiv = document.createElement('div');
        todoDiv.classList.add('todo');
        //Create LI
        const newTodo = document.createElement('li');
        newTodo.innerText = todoInput.value;
        newTodo.classList.add('todo-item');
        todoDiv.appendChild(newTodo);
        //Add Todo to local storage
        saveLocalTodos(todoInput.value);
        //Delete Button
        const trashButton = document.createElement('button');
        trashButton.innerHTML = '<i class="fas fa-trash"></i>';
        trashButton.classList.add("trash-btn");
        todoDiv.appendChild(trashButton);
        //Append to Child
        todoList.appendChild(todoDiv);
        //Clear Todo Input Value
        todoInput.value = "";
    }
    function deleteCheck(e){
        const item = e.target;
        //Delete TODO
        if(item.classList[0]==="trash-btn"){
            const todo = item.parentElement;
            //Animation
            todo.classList.add("fall");
            removeLocalTodos(todo);
            todo.addEventListener("transitionend",function(){ //remove wird erst ausgelöst, nachdem Animation abgespielt wurde
                todo.remove();
            })
        }
    }
    
    function saveLocalTodos(todo){
        let todos;
        //Check if I already have a thing in there
        if(localStorage.getItem("todos")===null) {
            todos = [];
        }
        else{
            todos = JSON.parse(localStorage.getItem("todos"));
        }
        todos.push(todo);
        localStorage.setItem("todos", JSON.stringify(todos));
    }
    
    function getTodos(){
        let todos;
        //Check if I already have a thing in there
        if(localStorage.getItem("todos")===null) {
            todos = [];
        }
        else{
            todos = JSON.parse(localStorage.getItem("todos"));
        }
        todos.forEach(function(todo) { 
                //Todo DIV
                const todoDiv = document.createElement('div');
                todoDiv.classList.add('todo');
                //Create LI
                const newTodo = document.createElement('li');
                newTodo.innerText = todo;
                newTodo.classList.add('todo-item');
                todoDiv.appendChild(newTodo);
                //Delete Button
                const trashButton = document.createElement('button');
                trashButton.innerHTML = '<i class="fas fa-trash"></i>';
                trashButton.classList.add("trash-btn");
                todoDiv.appendChild(trashButton);
                //Append to Child
                todoList.appendChild(todoDiv);
            });
            }
    
    function removeLocalTodos(todo){
        let todos;
        //Check if I already have a thing in there
        if(localStorage.getItem("todos")===null) {
            todos = [];
        }
        else{
            todos = JSON.parse(localStorage.getItem("todos"));
        }
        const todoIndex = todo.children[0].innerText; //todoIndex = String! aus dem Array der gelöscht werden soll (.innerText holt den String raus) 
        todos.splice(todos.indexOf(todoIndex),1);
        localStorage.setItem("todos", JSON.stringify(todos));
    }
        </script>

</body>
<script type="text/javascript" src="script-Version2.js"></script>
<script type="text/javascript" src="loadJSON2-Version2.js"></script>

</html>

